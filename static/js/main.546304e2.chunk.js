(this["webpackJsonpwa-react-2021-q4-capstone-project"]=this["webpackJsonpwa-react-2021-q4-capstone-project"]||[]).push([[0],{36:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var c,a,r,s,i,o,u=n(1),d=n.n(u),l=n(27),j=n.n(l),b=(n(36),n(3)),p=n(12),h=n(8),x=n(5),O=n(6),f=n(0),g=O.a.div(c||(c=Object(x.a)(["\n  padding: 10px;\n  margin-bottom: 5px;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n  width: ",";\n"])),(function(t){return t.width})),m=function(t){var e=t.onClick,n=t.children;return Object(f.jsx)(g,{onClick:e,children:n})},v=O.a.div(a||(a=Object(x.a)(["\n  \tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]))),y=function(){return Object(f.jsx)(m,{children:Object(f.jsx)(v,{children:Object(f.jsxs)("p",{children:["Ecommerce created during Wizeline\u2019s Academy React Bootcamp ",(new Date).getFullYear()]})})})},C=n(19),w=O.a.div(r||(r=Object(x.a)(["\n\tdisplay: flex;\n\t","\n\t","\n\t","\n\t","\n"])),(function(t){return t.direction&&{flexDirection:t.direction}}),(function(t){return t.wrap&&{flexWrap:t.wrap}}),(function(t){return t.justifyContent&&{justifyContent:t.justifyContent}}),(function(t){return t.alignItems&&{alignItems:t.alignItems}})),k=d.a.createContext({items:[],itemCount:0,totalCost:0}),L=O.a.div(s||(s=Object(x.a)(["\n\twidth: 100%;\n"]))),I=O.a.div(i||(i=Object(x.a)(["\n\tdisplay: inline-block;\n\tpadding-top: 10px;\n"]))),S=O.a.div(o||(o=Object(x.a)(["\n\tpadding-top: 10px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]))),E=function(){var t=Object(u.useContext)(k).state,e=Object(u.useState)(""),n=Object(b.a)(e,2),c=n[0],a=n[1],r=Object(h.f)();return Object(f.jsx)(L,{children:Object(f.jsx)(m,{children:Object(f.jsxs)(w,{direction:"row",justifyContent:"space-around",children:[Object(f.jsx)("img",{src:"".concat("/wa-react-2021-q4-internal-capstone-project","/logo-oficial.png"),alt:"logo",width:"100",height:"100",onClick:function(){return r.push("/wa-react-2021-q4-internal-capstone-project")}}),Object(f.jsxs)(I,{children:[Object(f.jsx)("input",{type:"text",value:c,placeholder:"Type here",onChange:function(t){return a(t.target.value)}}),Object(f.jsx)("button",{disabled:0===c.length,onClick:function(){r.push("/search?q=".concat(c))},children:Object(f.jsx)(C.a,{})})]}),Object(f.jsx)(S,{onClick:function(){return r.push("/cart")},children:Object(f.jsxs)(w,{direction:"column",children:[t.itemCount,Object(f.jsx)(C.b,{})]})})]})})})},_=n(7),q=n.n(_),P=n(9),T=n(2);var F=function(){var t=Object(h.g)().search;return d.a.useMemo((function(){return new URLSearchParams(t)}),[t])},R="https://wizeline-academy.cdn.prismic.io/api/v2",D={ref:null,isLoading:!0};function M(){var t=Object(u.useState)((function(){return D})),e=Object(b.a)(t,2),n=e[0],c=e[1];return Object(u.useEffect)((function(){var t=new AbortController;function e(){return(e=Object(P.a)(q.a.mark((function e(){var n,a,r,s,i,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(D),e.next=4,fetch(R,{signal:t.signal});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,r=void 0===(r=a.refs)?[]:r,s=Object(b.a)(r,1),i=s[0],o=(i=void 0===i?{}:i).ref,c({ref:o,isLoading:!1}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),c({ref:null,isLoading:!1}),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){t.abort()}}),[]),n}function A(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,c=M(),a=c.ref,r=c.isLoading,s=Object(u.useState)((function(){return{data:{},isLoading:!0}})),i=Object(b.a)(s,2),o=i[0],d=i[1];return Object(u.useEffect)((function(){if(!a||r)return function(){};var c=new AbortController;function s(){return(s=Object(P.a)(q.a.mark((function r(){var s,i;return q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d({data:{},isLoading:!0}),r.next=4,fetch("".concat(R,"/documents/search?ref=").concat(a,"&q=").concat(encodeURIComponent('[[at(document.type, "'.concat(t,'" )]]'))).concat(e?"&q="+encodeURIComponent('[[at(document.tags, ["Featured"])]]'):"","&lang=en-us&pageSize=").concat(n),{signal:c.signal});case 4:return s=r.sent,r.next=7,s.json();case 7:i=r.sent,d({data:i,isLoading:!1}),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),d({data:{},isLoading:!1}),console.error(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))).apply(this,arguments)}return function(){s.apply(this,arguments)}(),function(){c.abort()}}),[a,r]),o}var B,N,U,$,z,V="375px",W="425px",G="768px",J="1024px",Y="1440px",Z="2560px",H={mobileS:"(min-width: ".concat("320px",")"),mobileM:"(min-width: ".concat(V,")"),mobileL:"(min-width: ".concat(W,")"),tablet:"(min-width: ".concat(G,")"),laptop:"(min-width: ".concat(J,")"),laptopL:"(min-width: ".concat(Y,")"),desktop:"(min-width: ".concat(Z,")")},K=O.a.div(B||(B=Object(x.a)(["\n\tdisplay: grid;\n\tgrid-template-rows: auto;\n\t@media "," {\n\t\tgrid-template-columns: 100%;\n\t}\n\t@media "," {\n\t\tgrid-template-columns: 50% 50%;\n\t}\n\t@media "," {\n\t\tgrid-template-columns: 25% 25% 25% 25%;\n\t}\n\n"])),H.mobileS,H.tablet,H.laptop),Q=n(14),X=function(t){var e=t.text,n=t.onClick,c=t.disabled,a=void 0!==c&&c;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{disabled:a,onClick:n,children:e})})},tt=O.a.div(N||(N=Object(x.a)(["\n\tmax-width: 500px;\n"]))),et=O.a.ul(U||(U=Object(x.a)(["\n\tmargin: 0px;\n\tpadding: 0px;\n\tlist-style-type: none;\n\twidth: 90%;\n"]))),nt=O.a.li($||($=Object(x.a)(["\n\tlist-style-type: none;\n\tmargin: 0px;\n\tpadding: 10px;\n\twidth: 90%;\n\tcursor: pointer;\n\t&:hover {\n\t\tbackground-color: #B8B8B8;\n\t}\n\t","\n"])),(function(t){return t.active&&"background-color: #1111;"})),ct=function(t){var e=t.categories,n=t.filters,c=t.setFilters;return Object(f.jsxs)(tt,{children:[Object(f.jsx)("h1",{children:"Categories"}),Object(f.jsx)(X,{onClick:function(){return c(new Set([]))},text:"Clear filters",disabled:0===n.size}),Object(f.jsx)(et,{children:e.results&&e.results.map((function(t){return Object(f.jsx)(nt,{active:n.has(t.slugs[0]),onClick:function(){return function(t){n.has(t.slugs[0])?c((function(e){return new Set(Object(Q.a)(e).filter((function(e){return e!==t.slugs[0]})))})):c((function(e){return new Set([].concat(Object(Q.a)(e),[t.slugs[0]]))}))}(t)},children:t.data.name},t.id)}))})]})},at=function(t){var e=t.disabledPrev,n=t.disabledNext,c=t.nextRequest,a=t.previousRequest;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(w,{direction:"row",justifyContent:"flex-end",children:[Object(f.jsx)("button",{onClick:a,disabled:e,children:"Previous"}),Object(f.jsx)("button",{onClick:c,disabled:n,children:"Next"})]})})},rt=O.a.img(z||(z=Object(x.a)(["\n  width: ","%;\n"])),(function(t){return t.width})),st=function(t){var e=t.value,n=t.add,c=t.disabled,a=t.onChange,r=t.showButton,s=void 0===r||r;return Object(f.jsxs)(w,{direction:"row",style:{height:"30px"},children:[s&&Object(f.jsx)("button",{disabled:c,onClick:n,children:"Add to cart"}),Object(f.jsx)("input",{type:"number",value:e,min:"0",onChange:a,style:{padding:"5px",textAlign:"center"}})]})},it=function(){var t=F(),e=Object(h.f)(),n=Object(u.useContext)(k),c=n.state,a=n.dispatch,r=Object(u.useState)([]),s=Object(b.a)(r,2),i=s[0],o=s[1],d=A("category"),l=d.data,j=d.isLoading,p=A("product",!1,12),x=p.data,O=p.isLoading,g=Object(u.useState)([]),v=Object(b.a)(g,2),y=v[0],C=v[1],L=Object(u.useState)(new Set(t.get("category")?[t.get("category")]:[])),I=Object(b.a)(L,2),S=I[0],E=I[1];Object(u.useEffect)((function(){O||C(x)}),[x,O]),Object(u.useEffect)((function(){var t=[];if(y.results&&0===i.length){for(var e=0;e<y.results.length;e++)t.push(0);o(t)}}),[y]);var _=function(){var t=Object(P.a)(q.a.mark((function t(){var e,n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=y.next_page){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch(y.next_page);case 5:return e=t.sent,t.next=8,e.json();case 8:n=t.sent,C(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=Object(P.a)(q.a.mark((function t(){var e,n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=y.prev_page){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch(y.prev_page);case 5:return e=t.sent,t.next=8,e.json();case 8:n=t.sent,C(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(){return t.apply(this,arguments)}}(),D=function(t,e){var n=c.items.find((function(e){return t.id===e.id}));return t.data.stock-(void 0===n?0:n.count)-e};return j||O?Object(f.jsx)("h3",{children:"Loading data.."}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(w,{direction:"row",children:[Object(f.jsx)(m,{children:Object(f.jsx)(ct,{categories:l,setFilters:E,filters:S})}),Object(f.jsx)(K,{children:i.length>0&&y.results&&y.results.map((function(t,n){return(S.has(t.data.category.slug)||0===S.size)&&Object(f.jsxs)(m,{children:[Object(f.jsx)("p",{children:t.data.name}),Object(f.jsx)(st,{value:i[n],disabled:D(t,i[n])<=0,add:function(){return function(t){var e=y.results.map((function(e,n){return t===n?Object(T.a)(Object(T.a)({},e),{},{data:Object(T.a)(Object(T.a)({},e.data),{},{stock:e.data.stock-i[t]})}):e}));a({type:"ADD_ITEM",payload:{product:e[t],itemCount:i[t]}}),C(Object(T.a)(Object(T.a)({},y),{},{results:e}))}(n)},onChange:function(t){return function(t,e){var n=i.map((function(n,c){return e===c?parseInt(t.target.value):n}));o(n)}(t,n)}}),Object(f.jsx)(rt,{onClick:function(){return e.push("/product-detail/".concat(t.id))},width:40,src:t.data.mainimage.url}),Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Price: "}),"$",t.data.price]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Category: "}),t.data.category.slug]})]}),Object(f.jsx)("button",{onClick:function(){return e.push("/product-detail/".concat(t.id))},children:"See more details of this product"})]},"".concat(t.data.name,"-").concat(n))}))})]}),y.results&&Object(f.jsx)(at,{disabledPrev:null==y.prev_page,disabledNext:null==y.next_page,nextRequest:_,previousRequest:R})]})},ot=n(50),ut=n(49);n(45),n(46);var dt,lt,jt,bt,pt,ht=function(){var t=function(t){var e=M(),n=e.ref,c=e.isLoading,a=Object(u.useState)((function(){return{data:{},isLoading:!0}})),r=Object(b.a)(a,2),s=r[0],i=r[1];return Object(u.useEffect)((function(){if(!n||c)return function(){};var e=new AbortController;function a(){return(a=Object(P.a)(q.a.mark((function c(){var a,r;return q.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,i({data:{},isLoading:!0}),c.next=4,fetch("".concat(R,"/documents/search?ref=").concat(n,"&q=").concat(encodeURIComponent('[[at(document.id, "'.concat(t,'" )]]'))),{signal:e.signal});case 4:return a=c.sent,c.next=7,a.json();case 7:r=c.sent,i({data:r,isLoading:!1}),c.next=15;break;case 11:c.prev=11,c.t0=c.catch(0),i({data:{},isLoading:!1}),console.error(c.t0);case 15:case"end":return c.stop()}}),c,null,[[0,11]])})))).apply(this,arguments)}return function(){a.apply(this,arguments)}(),function(){e.abort()}}),[n,c]),s}(Object(h.h)().id),e=t.data,n=t.isLoading,c=Object(u.useContext)(k),a=c.state,r=c.dispatch,s=Object(u.useState)(0),i=Object(b.a)(s,2),o=i[0],d=i[1];return n?Object(f.jsx)("p",{children:"Loading product information..."}):e.results&&0===e.results.length?Object(f.jsx)("p",{children:"There is no data for this product"}):Object(f.jsx)(f.Fragment,{children:e.results&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(ot.a,{navigation:!0,pagination:!0,loop:!0,slidesPerView:3,children:e.results[0].data.images.map((function(t){return Object(f.jsx)(ut.a,{children:Object(f.jsx)("img",{style:{height:"400px",width:"500px",objectFit:"cover"},alt:t.image.url,src:t.image.url})},t.image.url)}))}),Object(f.jsx)("hr",{}),Object(f.jsxs)(m,{children:[Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Name:"})," ",e.results[0].data.name]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Category:"})," ",e.results[0].data.category.slug]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Price:"})," $",e.results[0].data.price]}),Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:"Sku:"})," ",e.results[0].data.sku]}),Object(f.jsx)(st,{value:o,disabled:function(t,e){var n=a.items.find((function(e){return t.id===e.id}));return t.data.stock-(void 0===n?0:n.count)-e}(e.results[0],o)<=0,add:function(){return r({type:"ADD_ITEM",payload:{itemCount:parseInt(o),product:e.results[0]}})},onChange:function(t){d(t.target.value)}})]}),Object(f.jsx)("p",{children:e.results[0].data.description[0].text}),Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Tags"}),Object(f.jsx)("ul",{children:e.results[0].tags.map((function(t,e){return Object(f.jsx)("li",{children:t},e)}))})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Product specs"}),Object(f.jsx)("ul",{children:e.results[0].data.specs.map((function(t,e){return Object(f.jsx)("li",{children:"".concat(t.spec_name,": ").concat(t.spec_value," ")},e)}))})]})]})]})]})})},xt=O.a.i(dt||(dt=Object(x.a)(["\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]))),Ot=function(){var t=A("category",!1,16),e=t.data,n=t.isLoading,c=Object(h.f)();return n?Object(f.jsx)("p",{children:"Loading..."}):e.results&&0===e.results.length?Object(f.jsx)("p",{children:"Empty list"}):Object(f.jsx)(f.Fragment,{children:e.results&&e.results.map((function(t){return Object(f.jsxs)(m,{children:[Object(f.jsx)(xt,{children:Object(f.jsx)(rt,{width:100,src:t.data.main_image.url,alt:t.data.alt,onClick:function(){return c.push("product-list?category=".concat(t.slugs[0]))}})}),Object(f.jsx)("label",{children:t.data.name})]},t.id)}))})},ft=function(){var t=A("product",!0),e=t.data;return t.isLoading?Object(f.jsx)("p",{children:"Loading..."}):e.results&&0===e.results.length?Object(f.jsx)("p",{children:"Empty list"}):Object(f.jsx)(f.Fragment,{children:e.results&&e.results.map((function(t){return Object(f.jsx)(m,{width:"15",children:Object(f.jsxs)(w,{direction:"column",alignItems:"center",children:[Object(f.jsx)(rt,{width:25,src:t.data.mainimage.url,alt:t.data.alt}),Object(f.jsx)("div",{children:Object(f.jsxs)(w,{direction:"column",justifyContent:"space-around",children:[Object(f.jsxs)("p",{children:["Product name: ",t.data.name," "]}),Object(f.jsxs)("p",{children:["Price: $",t.data.price," "]}),Object(f.jsxs)("p",{children:["Category:",t.data.category.slug," "]})]})})]})},t.id)}))})},gt=O.a.i(lt||(lt=Object(x.a)(["\n\tborder: solid black;\n\tborder-width: 0 3px 3px 0;\n\tdisplay: inline-block;\n\tpadding: 3px;\n\tcursor: pointer;\n"]))),mt=Object(O.a)(gt)(jt||(jt=Object(x.a)(["\n\ttransform: rotate(-45deg);\n\t-webkit-transform: rotate(-45deg);\n"]))),vt=Object(O.a)(gt)(bt||(bt=Object(x.a)(["\n\ttransform: rotate(135deg);\n\t-webkit-transform: rotate(135deg);\n"]))),yt=O.a.div(pt||(pt=Object(x.a)(["\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-height: 360px;\n\n \t"," {\n\t\t @media "," {\n\t\t\twidth: 100%;\n\t\t }\n\t\t @media "," {\n\t\t\twidth: 90%;\n\t\t }\n\t\t @media "," {\n\t\t\twidth: 60%;\n\t\t }\n\t\t @media "," {\n\t\t\twidth: 60%;\n\t\t }\n\t\t @media "," {\n\t\t\twidth: 50%;\n\t\t }\n \t}\n"])),rt,H.mobileS,H.table,H.laptop,H.laptopL,H.desktop),Ct=function(t){var e=t.images,n=t.isLoading,c=Object(u.useState)(0),a=Object(b.a)(c,2),r=a[0],s=a[1];return n?Object(f.jsx)(yt,{children:Object(f.jsx)("p",{children:"Loading..."})}):e.results&&0===e.results.length?Object(f.jsx)("p",{children:"Empty list"}):Object(f.jsxs)(yt,{children:[Object(f.jsx)(vt,{onClick:function(){return s((r-1+e.results.length)%e.results.length)}}),e.results&&e.results.map((function(t,e){return r===e&&Object(f.jsx)(rt,{maxWidth:"700px",src:t.data.main_image.url},e)})),Object(f.jsx)(mt,{onClick:function(){return s((r+1)%e.results.length)}})]})},wt=function(){var t=A("banner"),e=t.data,n=t.isLoading;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w,{alignItems:"center",justifyContent:"center",children:Object(f.jsx)(Ct,{images:e,isLoading:n})}),Object(f.jsx)("hr",{}),Object(f.jsx)(w,{wrap:"wrap",justifyContent:"space-around",alignItems:"flex-start",children:Object(f.jsx)(Ot,{})}),Object(f.jsx)("hr",{}),Object(f.jsx)(w,{wrap:"wrap",justifyContent:"space-around",alignItems:"flex-start",children:Object(f.jsx)(ft,{})}),Object(f.jsx)(p.b,{to:"/product-list",activeClassName:"hurray",children:Object(f.jsx)(X,{text:"View all products"})}),Object(f.jsx)("hr",{})]})},kt=function(){return Object(f.jsx)("h1",{children:"This page doesn't exist"})};var Lt=function(){var t=F(),e=Object(u.useContext)(k),n=e.state,c=e.dispatch,a=Object(u.useState)([]),r=Object(b.a)(a,2),s=r[0],i=r[1],o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=M(),c=n.ref,a=n.isLoading,r=Object(u.useState)((function(){return{data:{},isLoading:!0}})),s=Object(b.a)(r,2),i=s[0],o=s[1];return Object(u.useEffect)((function(){if(!c||a)return function(){};var n=new AbortController;function r(){return(r=Object(P.a)(q.a.mark((function a(){var r,s,i;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o({data:{},isLoading:!0}),r="".concat(R,"/documents/search?ref=").concat(c,"&q=").concat(encodeURIComponent('[[at(document.type, "product" )]]'),'&q=[[fulltext(document, "').concat(t,'")]]&lang=en-us&pageSize=').concat(e),a.next=5,fetch(r,{signal:n.signal});case 5:return s=a.sent,a.next=8,s.json();case 8:i=a.sent,o({data:i,isLoading:!1}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),o({data:{},isLoading:!1}),console.error(a.t0);case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){n.abort()}}),[c,a]),i}(t.get("q")),d=o.data,l=o.isLoading,j=Object(u.useState)([]),p=Object(b.a)(j,2),h=p[0],x=p[1];Object(u.useEffect)((function(){l||x(d)}),[d,l]),Object(u.useEffect)((function(){var t=[];if(h.results&&0===s.length){for(var e=0;e<h.results.length;e++)t.push(0);i(t)}}),[h]);var O=function(){var t=Object(P.a)(q.a.mark((function t(){var e,n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=h.next_page){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch(h.next_page);case 5:return e=t.sent,t.next=8,e.json();case 8:n=t.sent,x(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(P.a)(q.a.mark((function t(){var e,n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=h.prev_page){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch(h.prev_page);case 5:return e=t.sent,t.next=8,e.json();case 8:n=t.sent,x(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(){return t.apply(this,arguments)}}(),v=function(t,e){var c=n.items.find((function(e){return t.id===e.id}));return t.data.stock-(void 0===c?0:c.count)-e};return l?Object(f.jsx)("h3",{children:"Loading search results.."}):h.results&&0===h.results.length?Object(f.jsxs)("h3",{children:["There are no matches for ",t.get("q")?t.get("q"):"your search"]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("h1",{children:["Results for:  ",t.get("q")]}),Object(f.jsx)(K,{children:h.results&&h.results.map((function(t,e){return Object(f.jsxs)(m,{children:[Object(f.jsx)(st,{value:s[e],disabled:v(t,s[e])<=0,add:function(){return function(t){var e=h.results.map((function(e,n){return t===n?Object(T.a)(Object(T.a)({},e),{},{data:Object(T.a)(Object(T.a)({},e.data),{},{stock:e.data.stock-s[t]})}):e}));c({type:"ADD_ITEM",payload:{product:e[t],itemCount:s[t]}}),x(Object(T.a)(Object(T.a)({},h),{},{results:e}))}(e)},onChange:function(t){return function(t,e){var n=s.map((function(n,c){return e===c?parseInt(t.target.value):n}));i(n)}(t,e)}}),Object(f.jsx)(rt,{width:40,src:t.data.mainimage.url}),Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[Object(f.jsx)("p",{children:t.data.name}),Object(f.jsx)("p",{children:t.data.price}),Object(f.jsx)("p",{children:t.data.category.slug})]}),Object(f.jsx)("h3",{children:"Description"}),Object(f.jsx)("p",{children:t.data.short_description})]},"".concat(t.data.name,"-").concat(100*e))}))}),Object(f.jsx)(at,{disabledPrev:null==h.prev_page,disabledNext:null==h.next_page,nextRequest:O,previousRequest:g})]})},It=function(){var t=Object(u.useContext)(k),e=t.state,n=t.dispatch,c=Object(h.f)();if(0===e.items.length)return Object(f.jsx)(w,{alignItems:"center",justifyContent:"center",children:Object(f.jsx)("h1",{children:"Cart is empty"})});return Object(f.jsxs)(m,{children:[e.items.map((function(t,e){return Object(f.jsx)(m,{children:Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",alignItems:"center",wrap:"wrap",children:[Object(f.jsxs)("p",{style:{width:"200px"},children:["Product name: ",t.data.name]}),Object(f.jsx)("img",{alt:t.data.name,src:t.data.mainimage.url,width:"120px",height:"120px"}),Object(f.jsxs)("p",{children:["Unit Price: $",t.data.price]}),Object(f.jsx)(st,{value:t.count,disabled:t.count>t.data.stock,onChange:function(e){return function(t,e){e.data.stock-parseInt(t.target.value)<0||n({type:"UPDATE_ITEM",payload:Object(T.a)(Object(T.a)({},e),{},{count:parseInt(t.target.value),remCount:parseInt(t.target.value)-e.count})})}(e,t)},showButton:!1}),Object(f.jsx)(xt,{onClick:function(){return n({type:"REMOVE_ITEM",payload:t})},children:Object(f.jsx)(C.c,{})}),Object(f.jsxs)("p",{children:["Subtotal: $",t.data.price*t.count]})]})},"".concat(t.data.name,"-").concat(10*e))})),Object(f.jsxs)(w,{justifyContent:"space-between",children:[Object(f.jsx)("button",{onClick:function(){return c.push("/checkout")},children:" Go to checkout page"}),Object(f.jsxs)("p",{children:["Total cost: $",e.totalCost]})]})]})},St=function(t,e){switch(e.type){case"ADD_ITEM":var n=t.items.filter((function(t){return e.payload.product.id===t.id})),c=t.items.filter((function(t){return e.payload.product.id!==t.id})),a=[];return a=0===n.length?[].concat(Object(Q.a)(t.items),[Object(T.a)(Object(T.a)({},e.payload.product),{},{count:e.payload.itemCount})]):[].concat(Object(Q.a)(c),[Object(T.a)(Object(T.a)({},e.payload.product),{},{count:n[0].count+e.payload.itemCount})]),Object(T.a)(Object(T.a)({},t),{},{items:a,itemCount:t.itemCount+e.payload.itemCount,totalCost:(void 0===t.totalCost?0:t.totalCost)+e.payload.product.data.price*e.payload.itemCount});case"UPDATE_ITEM":return Object(T.a)(Object(T.a)({},t),{},{items:t.items.map((function(t){return t.id===e.payload.id?Object(T.a)(Object(T.a)({},t),{},{count:e.payload.count}):t})),itemCount:t.itemCount+e.payload.remCount,totalCost:(void 0===t.totalCost?0:t.totalCost)+e.payload.data.price*e.payload.remCount});case"REMOVE_ITEM":var r=t.items.filter((function(t){return t.id!==e.payload.id}));return Object(T.a)(Object(T.a)({},t),{},{items:r,itemCount:t.itemCount-e.payload.count,totalCost:t.totalCost-e.payload.data.price*e.payload.count});case"RESET_ITEMS":return Object(T.a)({},{items:[],itemCount:0,totalCost:0});default:return t}},Et=function(){var t=Object(h.f)(),e=Object(u.useContext)(k).state,n=Object(u.useState)(""),c=Object(b.a)(n,2),a=c[0],r=c[1],s=Object(u.useState)(""),i=Object(b.a)(s,2),o=i[0],d=i[1],l=Object(u.useState)(""),j=Object(b.a)(l,2),p=j[0],x=j[1],O=Object(u.useState)(""),g=Object(b.a)(O,2),v=g[0],y=g[1];return 0===e.items.length?Object(f.jsx)(w,{alignItems:"center",justifyContent:"center",children:Object(f.jsx)("h1",{children:"No products for buying"})}):Object(f.jsxs)(m,{children:[Object(f.jsx)("form",{children:Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",children:[Object(f.jsx)("input",{type:"text",value:a,placeholder:"Name",onChange:function(t){return r(t.target.value)}}),Object(f.jsx)("input",{type:"email",value:o,placeholder:"email",onChange:function(t){return d(t.target.value)}}),Object(f.jsx)("input",{type:"text",value:p,placeholder:"ZIP code",onChange:function(t){return x(t.target.value)}}),Object(f.jsx)("textarea",{value:v,placeholder:"Order notes",onChange:function(t){return y(t.target.value)}})]})}),e.items.map((function(t,e){return Object(f.jsx)(m,{children:Object(f.jsxs)(w,{direction:"row",justifyContent:"space-between",alignItems:"center",wrap:"wrap",children:[Object(f.jsxs)("p",{style:{width:"200px"},children:["Product name: ",t.data.name]}),Object(f.jsxs)("p",{children:["Items: ",t.count]}),Object(f.jsxs)("p",{children:["Subtotal: $",t.data.price*t.count]})]})},"".concat(t.data.name,"-").concat(10*e))})),Object(f.jsxs)(w,{justifyContent:"flex-end",children:[Object(f.jsx)("button",{onClick:function(){return t.push("/cart")},children:"Go back to cart"}),Object(f.jsx)("button",{children:"Place order"}),Object(f.jsxs)("p",{children:["Total cost: $",e.totalCost]})]})]})};var _t=function(){var t=Object(u.useReducer)(St,{items:[],itemCount:0}),e=Object(b.a)(t,2),n=e[0],c=e[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:Object(f.jsxs)(k.Provider,{value:{state:n,dispatch:c},children:[Object(f.jsx)(E,{}),Object(f.jsxs)(h.c,{children:[Object(f.jsx)(h.a,{exact:!0,path:"/wa-react-2021-q4-internal-capstone-project",children:Object(f.jsx)(wt,{})}),Object(f.jsx)(h.a,{exact:!0,path:"/product-list",children:Object(f.jsx)(it,{})}),Object(f.jsx)(h.a,{exact:!0,path:"/product-detail/:id",children:Object(f.jsx)(ht,{})}),Object(f.jsx)(h.a,{exact:!0,path:"/search",children:Object(f.jsx)(Lt,{})}),Object(f.jsx)(h.a,{exact:!0,path:"/cart",children:Object(f.jsx)(It,{})}),Object(f.jsx)(h.a,{exact:!0,path:"/checkout",children:Object(f.jsx)(Et,{})}),Object(f.jsx)(h.a,{path:"*",children:Object(f.jsx)(kt,{})})]})]})}),Object(f.jsx)(y,{})]})},qt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),c(t),a(t),r(t),s(t)}))};j.a.render(Object(f.jsx)(d.a.StrictMode,{children:Object(f.jsx)(_t,{})}),document.getElementById("root")),qt()}},[[47,1,2]]]);
//# sourceMappingURL=main.546304e2.chunk.js.map